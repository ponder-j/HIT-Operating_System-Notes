# ğŸ§  æ“ä½œç³»ç»Ÿç¬¬7ç« ï¼šå†…å­˜ç®¡ç† (Memory Management)

## ğŸŒŸ æ ¸å¿ƒé€»è¾‘ï¼šåˆ‡è›‹ç³•çš„è‰ºæœ¯

ä½ æœ‰ä¸€å—å¾ˆå¤§çš„è›‹ç³•ï¼ˆç‰©ç†å†…å­˜ï¼‰ï¼Œä½†æœ‰ä¸€å †é£Ÿé‡ä¸åŒçš„äººï¼ˆè¿›ç¨‹ï¼‰è¦åƒã€‚

- **ç›®æ ‡**ï¼šè®©å°½å¯èƒ½å¤šçš„äººåŒæ—¶åƒåˆ°è›‹ç³•ï¼ˆæé«˜å¤šé“ç¨‹åºåº¦ï¼‰ã€‚
- **æŒ‘æˆ˜**ï¼š
  - æ€ä¹ˆåˆ‡ï¼Ÿï¼ˆå›ºå®šå¤§å°åˆ‡ï¼Ÿè¿˜æ˜¯æŒ‰éœ€åˆ‡ï¼Ÿï¼‰
  - ä¸€ä¸ªäººåƒä¸å®Œå‰©ä¸‹çš„æ¸£æ¸£æ€ä¹ˆåŠï¼Ÿï¼ˆç¢ç‰‡é—®é¢˜ï¼‰
  - è¿™ä¸€å£è›‹ç³•åˆ°åº•æ˜¯è°çš„ï¼Ÿï¼ˆåœ°å€æ˜ å°„ï¼‰

## ç¬¬ä¸€éƒ¨åˆ†ï¼šäº”å¤§ç®¡ç†éœ€æ±‚ (Memory Management Requirements)

*å¯¹åº”è¯¾ä»¶ Page 3-9*

OS åœ¨ç®¡ç†å†…å­˜æ—¶å¿…é¡»æ»¡è¶³è¿™äº”ä¸ªæ¡ä»¶ï¼ˆèƒŒä¸‹æ¥ï¼Œå¸¸è€ƒé€‰æ‹©/å¡«ç©ºï¼‰ï¼š

1. **é‡å®šä½ (Relocation)**ï¼š
   - è¿›ç¨‹åœ¨å†…å­˜é‡Œçš„ä½ç½®æ˜¯ä¸å›ºå®šçš„ï¼ˆå¯èƒ½è¢«æ¢å‡ºå†æ¢å…¥åˆ°å¦ä¸€ä¸ªåœ°æ–¹ï¼‰ã€‚
   - æ‰€ä»¥ç¨‹åºé‡Œçš„åœ°å€ä¸èƒ½å†™æ­»ï¼ˆç»å¯¹åœ°å€ï¼‰ï¼Œå¿…é¡»èƒ½æ ¹æ®å½“å‰ä½ç½®åŠ¨æ€è°ƒæ•´ã€‚
2. **ä¿æŠ¤ (Protection)**ï¼š
   - ä½ çš„è¿›ç¨‹ä¸èƒ½ä¹±æ”¹æˆ‘çš„æ•°æ®ï¼ˆé™¤éæˆ‘åŒæ„ï¼‰ã€‚
   - å¿…é¡»åœ¨**è¿è¡Œæ—¶**æ£€æŸ¥åœ°å€æ˜¯å¦è¶Šç•Œï¼ˆç¡¬ä»¶æ”¯æŒï¼‰ã€‚
3. **å…±äº« (Sharing)**ï¼š
   - å¤šä¸ªè¿›ç¨‹å¦‚æœè·‘åŒä¸€ä¸ªç¨‹åºï¼ˆæ¯”å¦‚å¤§å®¶éƒ½å¼€Chromeï¼‰ï¼Œä»£ç æ®µåº”è¯¥æ˜¯å…±äº«çš„ï¼Œåˆ«æµªè´¹ç©ºé—´å­˜å¤šä»½ã€‚
4. **é€»è¾‘ç»„ç»‡ (Logical Organization)**ï¼š
   - å†…å­˜åº”è¯¥çœ‹èµ·æ¥åƒæ˜¯ä¸€ç»„æ¨¡å—ï¼ˆå‡½æ•°ã€æ ˆã€æ•°æ®ï¼‰ï¼Œé€šè¿‡â€œåˆ†æ®µâ€å®ç°ï¼Œæ–¹ä¾¿ç¼–å†™å’Œç¼–è¯‘ã€‚
5. **ç‰©ç†ç»„ç»‡ (Physical Organization)**ï¼š
   - å†…å­˜ï¼ˆå¿«ã€å°ã€è´µï¼‰å’Œç¡¬ç›˜ï¼ˆæ…¢ã€å¤§ã€ä¾¿å®œï¼‰ä¹‹é—´çš„æ•°æ®æµåŠ¨ä¸»è¦ç”± OS è´Ÿè´£ï¼Œç”¨æˆ·ä¸è¯¥æ“å¿ƒã€‚

## ç¬¬äºŒéƒ¨åˆ†ï¼šå†…å­˜åˆ†åŒºæŠ€æœ¯ (Memory Partitioning) ğŸ”¥ æ ¸å¿ƒç—›ç‚¹

*å¯¹åº”è¯¾ä»¶ Page 10-23*

è¿™æ˜¯æ—©æœŸçš„ç¬¨åŠæ³•ï¼Œä¸ºäº†ç†è§£ç°ä»£æŠ€æœ¯ï¼Œå¿…é¡»å…ˆæ‡‚è¿™äº›ã€‚

### 1. å›ºå®šåˆ†åŒº (Fixed Partitioning)

- **åšæ³•**ï¼šç³»ç»Ÿå¯åŠ¨æ—¶ï¼ŒæŠŠå†…å­˜åˆ‡æˆå›ºå®šçš„å—ï¼ˆPartitionï¼‰ã€‚
  - **å¤§å°ç›¸ç­‰**ï¼šç®€å•ï¼Œä½†å°è¿›ç¨‹å å¤§å‘ï¼Œæµªè´¹ã€‚
  - **å¤§å°ä¸ç­‰**ï¼šå¥½ä¸€ç‚¹ï¼Œä½†ä¾ç„¶æœ‰æµªè´¹ã€‚
- **è‡´å‘½ç¼ºç‚¹ â€”â€” å†…éƒ¨ç¢ç‰‡ (Internal Fragmentation)**ï¼š
  - åˆ†åŒºè®¾å®šäº† 10MBï¼Œä½ ç¨‹åºåªæœ‰ 3MBï¼Œå‰©ä¸‹çš„ 7MB åœ¨åˆ†åŒº**å†…éƒ¨**è¢«æµªè´¹äº†ï¼Œåˆ«äººä¹Ÿæ²¡æ³•ç”¨ã€‚

### 2. åŠ¨æ€åˆ†åŒº (Dynamic Partitioning)

- **åšæ³•**ï¼šè¿›ç¨‹æ¥çš„æ—¶å€™ï¼Œè¦å¤šå°‘ç»™å¤šå°‘ã€‚
- **è‡´å‘½ç¼ºç‚¹ â€”â€” å¤–éƒ¨ç¢ç‰‡ (External Fragmentation)**ï¼š
  - è¿›ç¨‹æ¥äº†åˆèµ°ï¼Œå†…å­˜é‡Œä¼šç•™ä¸‹å¾ˆå¤š**ä¸è¿ç»­çš„å°ç©ºæ´**ã€‚è¿™äº›ç©ºæ´åŠ èµ·æ¥è™½ç„¶å¾ˆå¤§ï¼Œä½†å› ä¸ºå¤ªæ•£äº†ï¼Œå¡ä¸ä¸‹æ–°è¿›ç¨‹ã€‚
- **è§£å†³æ–¹æ¡ˆ**ï¼š**å‹ç¼© (Compaction)**ã€‚æŠŠæ­£åœ¨ç”¨çš„å†…å­˜æŒªåˆ°ä¸€èµ·ï¼ŒæŠŠç©ºæ´æŒ¤å‡ºæ¥ã€‚ä½†æ˜¯**ææ…¢**ï¼Œå› ä¸ºè¦å¤§è§„æ¨¡æ¬è¿æ•°æ®ã€‚

### 3. åŠ¨æ€åˆ†åŒºçš„æ”¾ç½®ç®—æ³• (Placement Algorithms)

å¦‚æœæœ‰å¤šä¸ªç©ºæ´ï¼Œæ–°è¿›ç¨‹æ”¾å“ªï¼Ÿ

- **Best-fit (æœ€ä½³é€‚é…)**ï¼šæ‰¾ä¸€ä¸ª**æœ€å°ä½†å¤Ÿç”¨**çš„å‘ã€‚ï¼ˆç»“æœï¼šç•™ä¸‹å¾ˆå¤šæå°çš„ç¢ç‰‡ï¼‰ã€‚
- **First-fit (é¦–æ¬¡é€‚é…)**ï¼šä»å¤´æ‰¾ï¼Œé‡åˆ°ç¬¬ä¸€ä¸ªå¤Ÿç”¨çš„å°±è¿›ã€‚ï¼ˆç»“æœï¼šæœ€å¿«ï¼Œé€šå¸¸æœ€å¥½ï¼‰ã€‚
- **Next-fit (ä¸‹æ¬¡é€‚é…)**ï¼šä»ä¸Šæ¬¡æ‰¾çš„åœ°æ–¹æ¥ç€æ‰¾ã€‚ï¼ˆç»“æœï¼šå†…å­˜æœ«å°¾ä¼šè¢«ç¢å°¸ä¸‡æ®µï¼‰ã€‚

### 4. ä¼™ä¼´ç³»ç»Ÿ (Buddy System)

- **åšæ³•**ï¼šä¸€ç§æŠ˜ä¸­æ–¹æ¡ˆã€‚å†…å­˜æ€»æ˜¯æŒ‰ $2^k$ åˆ‡åˆ†ã€‚å¦‚æœä¸å¤Ÿå°å°±å¯¹åŠåˆ‡ï¼Œå¦‚æœç›¸é‚»çš„ä¼™ä¼´éƒ½ç©ºäº†å°±åˆå¹¶ã€‚

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šåˆ†é¡µ (Paging) ğŸ”¥ğŸ”¥ğŸ”¥ ç°ä»£ç³»ç»Ÿçš„åŸºçŸ³

*å¯¹åº”è¯¾ä»¶ Page 26-30*

ä¸ºäº†å½»åº•è§£å†³å¤–éƒ¨ç¢ç‰‡ï¼Œäººç±»å‘æ˜äº†åˆ†é¡µã€‚

### 1. æ ¸å¿ƒæ€æƒ³

- **Frame (é¡µæ¡†/ç‰©ç†å—)**ï¼šæŠŠ**ç‰©ç†å†…å­˜**åˆ‡æˆæå°çš„ã€å›ºå®šå¤§å°çš„å—ï¼ˆå¦‚ 4KBï¼‰ã€‚
- **Page (é¡µ/é€»è¾‘é¡µ)**ï¼šæŠŠ**ç”¨æˆ·ç¨‹åº**ä¹Ÿåˆ‡æˆåŒæ ·å¤§å°çš„å—ã€‚
- **ç¦»æ•£å­˜å‚¨**ï¼šç¨‹åºçš„ Page 0 å¯ä»¥æ”¾åœ¨å†…å­˜çš„ Frame 5ï¼ŒPage 1 å¯ä»¥æ”¾åœ¨ Frame 9ã€‚**ä¸éœ€è¦è¿ç»­å­˜æ”¾ï¼**

### 2. é¡µè¡¨ (Page Table)

- æ—¢ç„¶ä¹±æ”¾äº†ï¼Œæ€ä¹ˆæ‰¾å›æ¥ï¼Ÿ
- OS ä¸ºæ¯ä¸ªè¿›ç¨‹ç»´æŠ¤ä¸€å¼ **é¡µè¡¨**ï¼šè®°å½•äº† `Page Number -> Frame Number` çš„æ˜ å°„å…³ç³»ã€‚

### 3. ä¼˜ç¼ºç‚¹

- **ä¼˜ç‚¹**ï¼š**æ²¡æœ‰å¤–éƒ¨ç¢ç‰‡**ï¼ˆå› ä¸ºå†…å­˜è¢«åˆ‡æˆäº†æ ‡å‡†ä»¶ï¼Œåªè¦æœ‰ç©ºä½å°±èƒ½æ’ï¼‰ã€‚
- **ç¼ºç‚¹**ï¼šæœ‰å¾®é‡çš„**å†…éƒ¨ç¢ç‰‡**ï¼ˆç¨‹åºæœ€åä¸€é¡µå¦‚æœæ²¡è£…æ»¡ï¼Œä¼šæµªè´¹ä¸€ç‚¹ç‚¹ï¼‰ã€‚

## ç¬¬å››éƒ¨åˆ†ï¼šåˆ†æ®µ (Segmentation)

*å¯¹åº”è¯¾ä»¶ Page 31-33*

### 1. æ ¸å¿ƒæ€æƒ³

- åˆ†é¡µæ˜¯**ç‰©ç†è§†è§’**ï¼ˆä¸ºäº†å¥½å¡è¿›å†…å­˜ï¼‰ï¼Œåˆ†æ®µæ˜¯**é€»è¾‘è§†è§’**ï¼ˆä¸ºäº†ç¨‹åºå‘˜æ–¹ä¾¿ï¼‰ã€‚
- ä¸€ä¸ªç¨‹åºç”±ä¸»ç¨‹åºã€å­ç¨‹åºã€æ ˆã€æ•°æ®æ®µç»„æˆã€‚æˆ‘ä»¬å°±æŒ‰è¿™äº›è‡ªç„¶è¾¹ç•ŒæŠŠç¨‹åºåˆ‡æˆ**é•¿åº¦ä¸ä¸€**çš„æ®µ (Segments)ã€‚

### 2. ä¼˜ç¼ºç‚¹

- **ä¼˜ç‚¹**ï¼šæ–¹ä¾¿å…±äº«ï¼ˆæ•´ä¸ªä»£ç æ®µå…±äº«ï¼‰ã€æ–¹ä¾¿ä¿æŠ¤ï¼ˆæ•°æ®æ®µè®¾ä¸ºåªè¯»ï¼‰ã€‚
- **ç¼ºç‚¹**ï¼šåˆå›åˆ°äº†**åŠ¨æ€åˆ†åŒº**çš„è€è·¯ï¼Œä¼šæœ‰**å¤–éƒ¨ç¢ç‰‡**ï¼ˆæ®µé•¿çŸ­ä¸ä¸€ï¼Œä¸å¥½å¡«å‘ï¼‰ã€‚

## ğŸ“ å¿…èƒŒè‹±æ–‡æœ¯è¯­è¡¨ (Exam Vocabulary)

| **è‹±æ–‡**                      | **ä¸­æ–‡**  | **æ ¸å¿ƒå«ä¹‰**                           |
| ----------------------------- | --------- | -------------------------------------- |
| **Relocation**                | é‡å®šä½    | å°†é€»è¾‘åœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€               |
| **Internal Fragmentation**    | å†…éƒ¨ç¢ç‰‡  | å›ºå®šåˆ†åŒºä¸­ï¼Œåˆ†é…ç»™è¿›ç¨‹ä½†æ²¡ç”¨å®Œçš„ç©ºé—´   |
| **External Fragmentation**    | å¤–éƒ¨ç¢ç‰‡  | åŠ¨æ€åˆ†åŒºä¸­ï¼Œå¤ªå°è€Œæ— æ³•åˆ©ç”¨çš„ç©ºé—²å†…å­˜å— |
| **Compaction**                | å‹ç¼©/ç´§å‡‘ | ç§»åŠ¨å†…å­˜å†…å®¹ä»¥æ¶ˆé™¤å¤–éƒ¨ç¢ç‰‡ï¼ˆå¼€é”€å¤§ï¼‰   |
| **Paging**                    | åˆ†é¡µ      | ç­‰å¤§åˆ‡å‰²ï¼Œè§£å†³å¤–éƒ¨ç¢ç‰‡                 |
| **Frame**                     | é¡µæ¡†      | ç‰©ç†å†…å­˜çš„åˆ‡ç‰‡                         |
| **Page**                      | é¡µ        | é€»è¾‘åœ°å€ç©ºé—´çš„åˆ‡ç‰‡                     |
| **Page Table**                | é¡µè¡¨      | è®°å½• Page -> Frame çš„æ˜ å°„              |
| **Segmentation**              | åˆ†æ®µ      | é€»è¾‘åˆ‡å‰²ï¼Œæ–¹ä¾¿å…±äº«å’Œä¿æŠ¤               |
| **Logical / Virtual Address** | é€»è¾‘åœ°å€  | ç¨‹åºé‡Œçœ‹åˆ°çš„åœ°å€ï¼ˆä»0å¼€å§‹ï¼‰            |
| **Physical / Real Address**   | ç‰©ç†åœ°å€  | å†…å­˜æ¡ä¸Šçš„çœŸå®åœ°å€                     |

## ğŸ’¡ å¸¸è§ç®€ç­”é¢˜æ€è·¯

1. **å†…éƒ¨ç¢ç‰‡å’Œå¤–éƒ¨ç¢ç‰‡çš„åŒºåˆ«ï¼Ÿ**
   - **å†…éƒ¨ç¢ç‰‡**ï¼šå‘ç”Ÿåœ¨**å›ºå®šåˆ†åŒº**æˆ–**åˆ†é¡µ**ä¸­ã€‚æ˜¯**å·²ç»åˆ†é…ç»™è¿›ç¨‹**ä½†è¿›ç¨‹æ²¡ç”¨ä¸Šçš„ç©ºé—´ã€‚
   - **å¤–éƒ¨ç¢ç‰‡**ï¼šå‘ç”Ÿåœ¨**åŠ¨æ€åˆ†åŒº**æˆ–**åˆ†æ®µ**ä¸­ã€‚æ˜¯**è¿˜æ²¡æœ‰åˆ†é…**ï¼Œä½†å› ä¸ºå¤ªå°å¤ªæ•£è€Œæ²¡æ³•åˆ©ç”¨çš„ç©ºé—´ã€‚
2. **åˆ†é¡µå’Œåˆ†æ®µçš„ä¸»è¦åŒºåˆ«ï¼Ÿ**
   - **ç›®çš„**ï¼šåˆ†é¡µæ˜¯ä¸ºäº†ç³»ç»Ÿç®¡ç†ç‰©ç†å†…å­˜æ–¹ä¾¿ï¼ˆæ¶ˆé™¤å¤–éƒ¨ç¢ç‰‡ï¼‰ï¼›åˆ†æ®µæ˜¯ä¸ºäº†æ»¡è¶³ç”¨æˆ·é€»è¾‘éœ€æ±‚ï¼ˆå…±äº«ã€ä¿æŠ¤ï¼‰ã€‚
   - **å¤§å°**ï¼šé¡µå¤§å°å›ºå®šï¼ˆç³»ç»Ÿå®šï¼‰ï¼›æ®µå¤§å°ä¸å›ºå®šï¼ˆç¨‹åºå®šï¼‰ã€‚
   - **åœ°å€ç©ºé—´**ï¼šåˆ†é¡µæ˜¯ä¸€ç»´çš„ï¼›åˆ†æ®µæ˜¯äºŒç»´çš„ï¼ˆæ®µå· + æ®µå†…åç§»ï¼‰ã€‚
3. **é€»è¾‘åœ°å€å¦‚ä½•è½¬æ¢ä¸ºç‰©ç†åœ°å€ï¼Ÿï¼ˆåˆ†é¡µæ¨¡å¼ä¸‹ï¼‰**
   - é€»è¾‘åœ°å€ = `Page Number` + `Offset`
   - æŸ¥é¡µè¡¨ï¼š`Page Number` -> `Frame Number`
   - ç‰©ç†åœ°å€ = `Frame Number` + `Offset`